# Get started with OceanBase Database Community Edition

This topic describes how to install OceanBase Database on a single server for quickstart.

## Prerequisites

Your software and hardware environments meet the following requirements.

| Item | Description |
| --- | --- |
| OS | <ul><li>Anolis OS 8.X (Linux kernel V3.10.0 or later)</li><li>Red Hat Enterprise Linux Server 7.X (Linux kernel V3.10.0 or later)</li><li>CentOS Linux 7.X (Linux kernel V3.10.0 or later)</li><li>KylinOS V10</li><li>AnolisOS V8.6 or later</li><li>Unity Operating System (UOS) V1020a/1021a/1021e/1001c</li><li>NFSChina V4.0 or later</li><li>Inspur KOS V5.8</li><li>BCLinux BigCloud Enterprise Linux For Euler 21.10 LTS</li></ul> |
| CPU | At least 2 cores or preferably 4 cores or more  |
| Memory | At least 8 GB of memory or preferably 16 GB or more  |
| Disk type | SSD (recommended)  |
| Disk space | Six times the memory size or more  |
| File system | EXT4 or XFS. Choose XFS when the data volume exceeds 16 TB.  |

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p>The following instructions describe how to deploy OceanBase Database on a CentOS Linux 7.9 system with x86 architecture. Note that the procedure may differ on other operating systems.</p>
</main>

## Use OBD to deploy OceanBase Database

### Step 1: Download and install the all-in-one package

The 4.0.0 version offers an all-in-one installation package, which includes the necessary information you need to install OBD, OceanBase Database, ODP, OBAgent, Grafana, and Prometheus. You can download and install all these components at a time, and select the specific versions you want to use. The following two installation methods are available:

#### Online installation

Run the following command to download and install the all-in-one package online:

```bash
bash -c "$(curl -s https://obbusiness-private.oss-cn-shanghai.aliyuncs.com/download-center/opensource/oceanbase-all-in-one/installer.sh)"
```

#### Offline installation

1. Download the latest all-in-one package from [OceanBase Download Center](https://en.oceanbase.com/softwarecenter).

2. Run the following commands to decompress the package and go to the installation directory:

   ```bash
   tar -xzf oceanbase-all-in-one.4.0.0.0-beta-100120221102135736.el7.x86_64.tar.gz
   cd oceanbase-all-in-one/bin/
   ```

3. Execute the installation script.

   ```bash
   [root@**** bin]#  ./install.sh
   name: grafana
   version: 7.5.17
   release:1
   arch: x86_64
   md5: 1bf1f338d3a3445d8599dc6902e7aeed4de4e0d6
   add /home/admin/oceanbase-all-in-one/rpms/grafana-7.5.17-1.el7.x86_64.rpm to local mirror
   name: obagent
   version: 1.2.0
   release:4.el7
   arch: x86_64
   md5: 0e8f5ee68c337ea28514c9f3f820ea546227fa7e
   add /home/admin/oceanbase-all-in-one/rpms/obagent-1.2.0-4.el7.x86_64.rpm to local mirror
   name: obproxy-ce
   version: 4.0.0
   release:5.el7
   arch: x86_64
   md5: de53232a951184fad75b15884458d85e31d2f6c3
   add /home/admin/oceanbase-all-in-one/rpms/obproxy-ce-4.0.0-5.el7.x86_64.rpm to local mirror
   name: oceanbase-ce
   version: 4.0.0.0
   release:100000272022110114.el7
   arch: x86_64
   md5: 42611dc51ca9bb28f36e60e4406ceea4a74914c7
   add /home/admin/oceanbase-all-in-one/rpms/oceanbase-ce-4.0.0.0-100000272022110114.el7.x86_64.rpm to local mirror
   name: oceanbase-ce-libs
   version: 4.0.0.0
   release:100000272022110114.el7
   arch: x86_64
   md5: 188919f8128394bf9b62e3989220ded05f1d14da
   add /home/admin/oceanbase-all-in-one/rpms/oceanbase-ce-libs-4.0.0.0-100000272022110114.el7.x86_64.rpm to local mirror
   name: prometheus
   version: 2.37.1
   release:10000102022110211.el7
   arch: x86_64
   md5: 58913c7606f05feb01bc1c6410346e5fc31cf263
   add /home/admin/oceanbase-all-in-one/rpms/prometheus-2.37.1-10000102022110211.el7.x86_64.rpm to local mirror
   Disable remote ok
   ```

#### Settings and verification after installation

The installation script will try to automatically set the environment variables. If the environment variables do not take effect in a specific system, you can execute the environment variable setting script as prompted. To make the settings take effect for each logon, write the settings to the corresponding profile file, which is generally named `~/.bash_profile`, based on your terminal environment.

```bash
  Install Finished
  =====================================================================
  Setup Environment:     source ~/.oceanbase-all-in-one/bin/env.sh
  Quick Start:           obd demo
  More Details:          obd -h
  =====================================================================
```

  <main id="notice" type='notice'>
    <h4>Note</h4>
    <p>After the installation, you must run the <code>source ~/.oceanbase-all-in-one/bin/env.sh</code> command. Otherwise, <code>which obd</code> will fail. </p>
  </main>

Run the `which obd` and `which obclient` commands to verify whether the installation is successful. If you can find the `obd` and `obclient` paths under `oceanbase-all-in-one`, the installation is successful.

```bash
[root@test .obd]# which obd
/root/.oceanbase-all-in-one/obd/usr/bin/obd
[root@test .obd]# which obclient
/root/.oceanbase-all-in-one/obclient/u01/obclient/bin/obclient
```

### Step 2: Use the obd demo command to quickly deploy a standalone environment

With the `obd demo` command, you can directly deploy and start specified components on the local server without using the configuration file. The name of the deployed cluster is fixed to `demo`. After the deployment, run the `obd cluster list` command to view the cluster information. You can also use other commands, such as `obd cluster display demo`, to manage the cluster.

Before you run the `obd demo` command, make sure that:

+ Ports `2881` and `2882` are not occupied.

+ At least `6 GB` of memory is available on the server.

+ At least `2 CPU cores` are available on the server.

+ At least `54 GB` of disk space is available on the server.

+ At least `20,000` file handles are opened.

The minimum specifications are deployed if you run `obd demo` for deployment. By default, the latest versions of OceanBase Database Community Edition, ODP Community Edition, OBAgent, Grafana, and Prometheus are deployed.

  <main id="notice" type='notice'>
    <h4>Note</h4>
    <p>The <code>obd demo</code> deployment method applies only to quickstart scenarios and does not apply to a production environment.</p>
  </main>

```shell
# Deploy and start OceanBase Database.
[root@****]# obd demo
+---------------------------------------------+
|                   observer                  |
+-----------+---------+------+-------+--------+
| ip        | version | port | zone  | status |
+-----------+---------+------+-------+--------+
| 127.0.0.1 | 4.0.0.0 | 2881 | zone1 | ACTIVE |
+-----------+---------+------+-------+--------+
obclient -h127.0.0.1 -P2881 -uroot -Doceanbase

+---------------------------------------------+
|                   obproxy                   |
+-----------+------+-----------------+--------+
| ip        | port | prometheus_port | status |
+-----------+------+-----------------+--------+
| 127.0.0.1 | 2883 | 2884            | active |
+-----------+------+-----------------+--------+
obclient -h127.0.0.1 -P2883 -uroot -Doceanbase
+----------------------------------------------------+
|                      obagent                       |
+----------------+-------------+------------+--------+
| ip             | server_port | pprof_port | status |
+----------------+-------------+------------+--------+
| 10.10.10.1     | 8088        | 8089       | active |
+----------------+-------------+------------+--------+
+-------------------------------------------------------+
|                       prometheus                      |
+----------------------------+------+----------+--------+
| url                        | user | password | status |
+----------------------------+------+----------+--------+
| http://10.10.10.1:9090     |      |          | active |
+----------------------------+------+----------+--------+
+---------------------------------------------------------------------+
|                               grafana                               |
+----------------------------------------+-------+-----------+--------+
| url                                    | user  | password  | status |
+----------------------------------------+-------+-----------+--------+
| http://10.10.10.1:3000/d/oceanbase     | admin | ********* | active |
+----------------------------------------+-------+-----------+--------+
demo running
# Connect to OceanBase Database by using OBClient
[root@****]# obclient -h127.0.0.1 -uroot -P2881
Welcome to the OceanBase.  Commands end with ; or \g.
Your OceanBase connection id is 5751
Server version: 5.6.25 OceanBase 4.0.0 (r10100032022041510-a09d3134c10665f03fd56d7f8bdd413b2b771977) (Built Oct 15 2022 02:16:22)

Copyright (c) 2000, 2022, OceanBase and/or its affiliates. All  rights reserved.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

obclient>
```

You can specify related parameters to control the components to deploy and the versions, configurations, and deployment directories of the components. For more information about the `obd demo` command, see [Quick deployment command](https://en.oceanbase.com/docs/community-obd-en-10000000000842674).

If Grafana or Prometheus is installed, the access URL of Grafana or Prometheus is provided, as shown in the following command output. In Alibaba Cloud or other cloud environments, the installation program may be unable to obtain a public IP address and therefore will provide an internal IP address, which is `10.10.10.1` in this example. You must use a correct public IP address.

```test
-prometheus program health check ok
-Connect to Prometheus ok
-Initialize cluster ok
+------------------------------------------------------+
|                      prometheus                      |
+---------------------------+------+----------+--------+
| url                       | user | password | status |
+---------------------------+------+----------+--------+
| http://10.10.10.1:9090    |      |          | active |
+---------------------------+------+----------+--------+
+------------------------------------------------------------------+
|                             grafana                              |
+-------------------------------------+-------+-----------+--------+
| url                                 | user  | password  | status |
+-------------------------------------+-------+-----------+--------+
| http://10.10.10.1:3000/d/oceanbase  | admin | ********* | active |
+-------------------------------------+-------+-----------+--------+
```

## Use Docker to deploy OceanBase Database

<main id="notice" type='notice'>
    <h4>Note</h4>
    <p>Before you deploy the <a href="https://hub.docker.com/r/oceanbase/oceanbase-ce">oceanbase-ce</a> image, make sure that the following prerequisites are met:</p>
    <ul>
    <li>
    <p>The resources on your server are sufficient to support a Docker container with at least 2 CPU cores and 8 GB of memory. </p>
    </li>
    <li>
    <p>You have installed the latest version of Docker on your server. For more information, see the <a href="https://docs.docker.com/get-docker/">Docker Documentation</a>. </p>
    </li>
    <li>
    <p>You have started the Docker service on your server. </p>
    </li>
    </ul>
  </main>

### Step 1: Start an OceanBase Database instance

Run the following command to start an OceanBase Database instance:

```test
# Deploy an instance with the maximum specifications supported by the current container.
docker run -p 2881:2881 --name obstandalone -d oceanbase/oceanbase-ce
## Deploy a mini standalone instance.
docker run -p 2881:2881 --name obstandalone -e MINI_MODE=1 -d oceanbase/oceanbase-ce
```

<main id="notice" type='explain'>
  <h4>Note</h4>
  <p> By default, the preceding commands pull the latest version of the Docker image. You can select a desired Docker image from <a href="https://hub.docker.com/r/oceanbase/oceanbase-ce/tags">Docker images</a> as needed.  </p>
</main>

The process is expected to take two to five minutes. Run the following command. If "boot success!" is returned, the instance is started.

```test
$ docker logs obstandalone | tail -1
boot success!
```

### Step 2: Connect to the OceanBase Database instance

The oceanbase-ce image is integrated with the OBClient and the default connection script `ob-mysql`.

```test
docker exec -it obstandalone ob-mysql sys # Connect to the root user of the sys tenant.
docker exec -it obstandalone ob-mysql root # Connect to the root user of the test tenant.
docker exec -it obstandalone ob-mysql test # Connect to the test user of the test tenant.
```

You can also run the following command to connect to the instance by using the OBClient or MySQL client on your local server.

```test
mysql -uroot -h127.1 -P2881
```

After the connection is established, the following information is displayed:

```test
$ docker exec -it obstandalone ob-mysql sys

login as root@sys
Command is: obclient -h127.1 -uroot@sys -A -Doceanbase -P2881
Welcome to the OceanBase.  Commands end with ; or \g.
Your OceanBase connection id is 3221487638
Server version: 5.7.25 OceanBase 4.0.0 (r10100032022041510-a09d3134c10665f03fd56d7f8bdd413b2b771977) (Built Oct 15 2022 02:16:22)

Copyright (c) 2000, 2022, OceanBase and/or its affiliates. All  rights reserved.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

MySQL [oceanbase]>
```
