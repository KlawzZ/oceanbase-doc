# Get started with OceanBase Database Enterprise Edition

This topic describes how to install a single-replica OceanBase cluster on a commodity physical server by using RPM packages. You have the option to deploy OceanBase Database on a physical server or a virtual machine (VM) with either the x86_64 or ARM_64 architecture.

For more information about how to deploy an OceanBase cluster, see [Deployment introduction](../../4.deploy/1.deploy-overview.md).

## Prerequisites

Your software and hardware environments meet the following requirements.

1. Requirements on the server architecture and version of Linux operating systems

   The following table describes the Linux operating systems that support OceanBase Database.

   | Linux operating system | Version | Server architecture |
   |--------------------------|-----------|-------------------------------|
   | AliOS | V7.2 and later | x86_64 (including Hygon) or AArch64 (Kunpeng and Phytium) |
   | Anolis OS | V8.6 and later | x86_64 (including Hygon) or AArch64 (Kunpeng and Phytium) |
   | Kylin OS | V10 | x86_64 (including Hygon) or AArch64 (Kunpeng and Phytium) |
   | UOS | V20 | x86_64 (including Hygon) or AArch64 (Kunpeng and Phytium) |
   | NFSChina | V4.0 and later | x86_64 (including Hygon) or AArch64 (Kunpeng and Phytium) |
   | Inspur KOS | V5.8 | x86_64 (including Hygon) or AArch64 (Kunpeng and Phytium) |
   | CentOS or Red Hat Enterprise Linux | V7.2 and later <blockquote><b>Note</b></br>CentOS 8.X is not supported. </blockquote> | x86_64 (including Hygon) or AArch64 (Kunpeng and Phytium) |

2. Server configurations

   At least 4 CPU cores and 16 GB of memory.

3. Disk planning

   By default, `/data/1` is used as the data directory, `/data/log1` as the log directory, and `/home` as the installation directory of OceanBase Database.

## Use OBD to deploy OceanBase Database

  <main id="notice" type='explain'>
    <h4>Note</h4>
    <p> The following instructions describe how to deploy OceanBase Database on a CentOS Linux 7.9 system with x86 architecture. Note that the procedure may differ on other operating systems. </p>
  </main>

### Step 1: Download and install the all-in-one package

The 4.0.0 version offers an all-in-one installation package, which includes the necessary information you need to install OceanBase Deployer (OBD), OceanBase Database, OceanBase Database Proxy (ODP), OceanBase Agent (OBAgent), Grafana, OceanBase Cloud Platform (OCP) Express, and Prometheus. You can download and install all these components at a time, and select the specific versions you want to use.

#### Offline installation

1. Contact OceanBase Technical Support to obtain the latest all-in-one package of OceanBase Database Enterprise Edition.

2. Run the following commands to decompress the package and go to the installation directory:

   ```bash
   tar -xzf oceanbase-all-in-one-4.1.0.0-100120230317111320.el7.x86_64.tar
   cd oceanbase-all-in-one/bin/
   ```

3. Execute the installation script.

   ```bash
   [root@**** bin]#  ./install.sh
   name: grafana
   version: 7.5.17
   release:1
   arch: x86_64
   md5: 1bf1f338d3a3445d8599dc6902e7aeed4de4e0d6
   add /home/admin/oceanbase-all-in-one/rpms/grafana-7.5.17-1.el7.x86_64.rpm to local mirror
   name: obagent
   version: 1.3.0
   release:20.el7
   arch: x86_64
   md5: e96592c0306ed99a094cabb2a65343e4b636f1ea
   add /home/admin/oceanbase-all-in-one/rpms/obagent-1.3.0-20.el7.x86_64.rpm to local mirror
   name: obproxy
   version: 4.1.0.0
   release:32023021710.el7
   arch: x86_64
   md5: b27304d89a1d80711107b597582a8e2636c28fba
   add /home/admin/oceanbase-all-in-one/rpms/obproxy-4.1.0.0-32023021710.el7.x86_64.rpm to local mirror
   name: oceanbase
   version: 4.1.0.0
   release:100000982023031415.el7
   arch: x86_64
   md5: bb1509879417825ed9cdab2479eb79c1c037a44a
   add /home/admin/oceanbase-all-in-one/rpms/oceanbase-4.1.0.0-100000982023031415.el7.x86_64.rpm to local mirror
   name: ocp-express
   ver. 1.0.0
   release:100000382023031616.el7
   arch: x86_64
   md5: 992e9837f41f016ecf43d6bcb7225f17e12bea09
   add /home/admin/oceanbase-all-in-one/rpms/ocp-express-1.0.0-100000382023031616.el7.x86_64.rpm to local mirror
   name: prometheus
   version: 2.37.1
   release:10000102022110211.el7
   arch: x86_64
   md5: 58913c7606f05feb01bc1c6410346e5fc31cf263
   add /home/admin/oceanbase-all-in-one/rpms/prometheus-2.37.1-10000102022110211.el7.x86_64.rpm to local mirror
   Trace ID: d5b277c8-c4a1-11ed-8099-e68dd98f006d
   If you want to view detailed obd logs, please run: obd display-trace d5b277c8-c4a1-11ed-8099-e68dd98f006d
   Disable remote ok
   Trace ID: d68a7eac-c4a1-11ed-9cb0-e68dd98f006d
   If you want to view detailed obd logs, please run: obd display-trace d68a7eac-c4a1-11ed-9cb0-e68dd98f006d

   add auto set env logic to profile: /root/.bash_profile
   ```

#### Settings and verification after installation

The installation script will try to automatically set the environment variables. If the environment variables do not take effect in a specific system, you can execute the environment variable setting script as prompted. To make the settings take effect for each logon, write the settings to the corresponding profile file, which is generally named `~/.bash_profile`, based on your terminal environment.

```bash
  Install Finished
  =====================================================================
  Setup Environment:     source ~/.oceanbase-all-in-one/bin/env.sh
  Quick Start:           obd demo
  More Details:          obd -h
  =====================================================================
```

  <main id="notice" type='notice'>
        <h4>Note</h4>
        <p>After the installation, you must run the <code>source ~/.oceanbase-all-in-one/bin/env.sh</code> command. Otherwise, <code>which obd</code> will fail. </p>
  </main>

Run the `which obd` and `which obclient` commands to verify whether the installation is successful. If you can find the `obd` and `obclient` paths under `oceanbase-all-in-one`, the installation is successful.

```bash
  [root@test .obd]# which obd
  /root/.oceanbase-all-in-one/obd/usr/bin/obd
  [root@test .obd]# which obclient
  /root/.oceanbase-all-in-one/obclient/u01/obclient/bin/obclient
```

### Step 2: Use the obd demo command to quickly deploy a standalone environment

With the `obd demo` command, you can directly deploy and start specified components on the local server without using the configuration file. The name of the deployed cluster is fixed to `demo`. After the deployment, run the `obd cluster list` command to view the cluster information. You can also use other commands, such as `obd cluster display demo`, to manage the cluster.

Before you run the `obd demo` command, make sure that:

+ Ports `2881` and `2882` are not occupied.

+ At least `6 GB` of memory is available on the server.

+ At least `2 CPU cores` are available on the server.

+ At least `54 GB` of disk space is available on the server.

+ At least `20,000` file handles are opened.

The minimum specifications are deployed if you run `obd demo` for deployment. By default, the latest versions of OceanBase Database, ODP, OBAgent, Grafana, and Prometheus are deployed.

  <main id="notice" type='notice'>
    <h4>Note</h4>
    <p>The <code>obd demo</code> deployment method applies only to quickstart scenarios and does not apply to a production environment.</p>
  </main>

#### Deploy and start OceanBase Database

```shell
[root@****]# obd demo -c oceanbase,obproxy
Package oceanbase-4.1.0.0-100000982023031415.el7 is available.
Package obproxy-4.1.0.0-32023021710.el7 is available.
install oceanbase-4.1.0.0 for local ok
install obproxy-4.1.0.0 for local ok
Cluster param config check ok
Open ssh connection ok
Generate observer configuration ok
Generate obproxy configuration ok
+------------------------------------------------------------------------------------------+
|                                         Packages                                         |
+------------+---------+------------------------+------------------------------------------+
| Repository | Version | Release                | Md5                                      |
+------------+---------+------------------------+------------------------------------------+
| oceanbase  | 4.1.0.0 | 100000982023031415.el7 | bb1509879417825ed9cdab2479eb79c1c037a44a |
| obproxy    | 4.1.0.0 | 32023021710.el7        | b27304d89a1d80711107b597582a8e2636c28fba |
+------------+---------+------------------------+------------------------------------------+
Repository integrity check ok
Parameter check ok
Open ssh connection ok
Cluster status check ok
Initializes observer work home ok
Initializes obproxy work home ok
Remote oceanbase-4.1.0.0-100000982023031415.el7-bb1509879417825ed9cdab2479eb79c1c037a44a repository install ok
Remote oceanbase-4.1.0.0-100000982023031415.el7-bb1509879417825ed9cdab2479eb79c1c037a44a repository lib check ok
Remote obproxy-4.1.0.0-32023021710.el7-b27304d89a1d80711107b597582a8e2636c28fba repository install ok
Remote obproxy-4.1.0.0-32023021710.el7-b27304d89a1d80711107b597582a8e2636c28fba repository lib check ok
demo deployed
Get local repositories ok
Search plugins ok
Open ssh connection ok
Load cluster param plugin ok
Check before start observer ok
[WARN] OBD-1012: (127.0.0.1) clog and data use the same disk (/)

Check before start obproxy ok
Start observer ok
observer program health check ok
Connect to observer ok
Initialize oceanbase ok
Start obproxy ok
obproxy program health check ok
Connect to obproxy ok
Initialize obproxy ok
Wait for observer init ok
+---------------------------------------------+
|                   observer                  |
+-----------+---------+------+-------+--------+
| ip        | version | port | zone  | status |
+-----------+---------+------+-------+--------+
| 127.0.0.1 | 4.1.0.0 | 2881 | zone1 | ACTIVE |
+-----------+---------+------+-------+--------+
obclient -h127.0.0.1 -P2881 -uroot -Doceanbase -A

+---------------------------------------------+
|                   obproxy                   |
+-----------+------+-----------------+--------+
| ip        | port | prometheus_port | status |
+-----------+------+-----------------+--------+
| 127.0.0.1 | 2883 | 2884            | active |
+-----------+------+-----------------+--------+
obclient -h127.0.0.1 -P2883 -uroot -Doceanbase -A
demo running
Trace ID: 0d6cfd06-c4a6-11ed-ac45-e68dd98f006d
If you want to view detailed obd logs, please run: obd display-trace 0d6cfd06-c4a6-11ed-ac45-e68dd98f006d
```

##### Connect to OceanBase Database by using OBClient

```shell
[root@****]# obclient -uroot@sys -h127.0.0.1 -P2881
Welcome to the OceanBase.  Commands end with ; or \g.
Your OceanBase connection id is 3221487644
Server version: OceanBase 4.1.0.0 (r100000982023031415-5a1bf675f0c2756e67fd0fc5546d2f9d191c0f24) (Built Mar 14 2023 15:17:07)

Copyright (c) 2000, 2018, OceanBase and/or its affiliates. All rights reserved.

Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.

obclient [(none)]>
```

You can specify related parameters to control the components to deploy and the versions, configurations, and deployment directories of the components. For more information about the `obd demo` command, see [Quick deployment command](https://en.oceanbase.com/docs/community-obd-en-10000000000842674).

If Grafana or Prometheus is installed, the access URL of Grafana or Prometheus is provided, as shown in the following command output. In Alibaba Cloud or other cloud environments, the installation program may be unable to obtain a public IP address and therefore will provide an internal IP address, which is `192.168.1.1` in this example. You must use a correct public IP address.

```test
-prometheus program health check ok
-Connect to Prometheus ok
-Initialize cluster ok
+------------------------------------------------------+
|                      prometheus                      |
+---------------------------+------+----------+--------+
| url                       | user | password | status |
+---------------------------+------+----------+--------+
| http://192.168.1.1:9090   |      |          | active |
+---------------------------+------+----------+--------+
+------------------------------------------------------------------+
|                             grafana                              |
+-------------------------------------+-------+-----------+--------+
| url                                 | user  | password  | status |
+-------------------------------------+-------+-----------+--------+
| http://192.168.1.1:3000/d/oceanbase | admin | oceanbase | active |
+-------------------------------------+-------+-----------+--------+
```

### Create a user tenant

After you deploy an OceanBase cluster, the sys tenant is automatically created in the database. You can create user tenants from the `sys` tenant as needed.

For more information about how to create a user tenant, see [Create a tenant](../../4.deploy/3.deploy-oceanbase-database-enterprise/4.command-line-deployment/5.create-oceanbase-tenant-command-line/2.create-tenant.md).

### Connect to OceanBase Database:

We recommend that you connect to OceanBase Database from OBClient or OceanBase Developer Center (ODC).

+ For more information about how to connect to OceanBase Database by using OBClient, see [Connect to an OceanBase Database tenant by using OBClient](../../3.develop/1.application-development-of-mysql-mode/1.database-connection-with-client-of-mysql-mode/3.connect-to-an-oceanbase-tenant-by-using-obclient-of-mysql-mode.md).

+ For more information about how to connect to OceanBase Database by using ODC, see [Connect to an OceanBase Database tenant by using ODC](../../3.develop/1.application-development-of-mysql-mode/1.database-connection-with-client-of-mysql-mode/4.connect-to-the-oceanbase-database-through-odc-of-mysql-mode.md).

For more information about connecting to OceanBase Database, see [Overview](../../3.develop/1.application-development-of-mysql-mode/1.database-connection-with-client-of-mysql-mode/1.connection-methods-overview-of-mysql-mode.md).
